{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\91870\\\\Desktop\\\\PhotoFolio-main\\\\src\\\\components\\\\albumsList\\\\AlbumsList.js\",\n  _s = $RefreshSig$();\nimport styles from \"./albumsList.module.css\";\nimport { useState, useEffect } from \"react\";\nimport { toast } from \"react-toastify\";\nimport Spinner from \"react-spinner-material\";\n\n// firebase imports\nimport { collection, getDocs, addDoc, Timestamp, query, orderBy } from \"firebase/firestore\";\nimport { db } from \"../../firebase\";\n\n// components imports\nimport { AlbumForm } from \"../albumForm/AlbumForm\";\nimport { ImagesList } from \"../imagesList/ImagesList\";\n\n// mock data\n// import { albumsData } from \"../../static/mock\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const AlbumsList = () => {\n  _s();\n  const [albums, setAlbums] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [albumAddLoading, setAlbumAddLoading] = useState(false);\n  const getAlbums = async () => {\n    setLoading(true);\n    const albumsRef = collection(db, \"albums\");\n    const albumsSnapshot = await getDocs(query(albumsRef, orderBy(\"created\", \"desc\")));\n    const albumsData = albumsSnapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    }));\n    setAlbums(albumsData);\n    setLoading(false);\n  };\n  useEffect(() => {\n    getAlbums();\n  }, []);\n  const handleAdd = async name => {\n    if (albums.find(a => a.name === name)) return toast.error(\"Album name already in use.\");\n    setAlbumAddLoading(true);\n    const albumRef = await addDoc(collection(db, \"albums\"), {\n      name,\n      created: Timestamp.now()\n    });\n    setAlbums(prev => [{\n      id: albumRef.id,\n      name\n    }, ...prev]);\n    setAlbumAddLoading(false);\n    toast.success(\"Album added successfully.\");\n  };\n  const [createAlbumIntent, setCreateAlbumIntent] = useState(false);\n  const [activeAlbum, setActiveAlbum] = useState(null);\n  const handleClick = name => {\n    if (activeAlbum === name) return setActiveAlbum(null);\n    setActiveAlbum(name);\n  };\n  const handleBack = () => setActiveAlbum(null);\n  if (albums.length === 0 && !loading) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.top,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"No albums found.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCreateAlbumIntent(!createAlbumIntent),\n          children: !createAlbumIntent ? \"Add album\" : \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), createAlbumIntent && /*#__PURE__*/_jsxDEV(AlbumForm, {\n        onAdd: handleAdd\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 31\n      }, this)]\n    }, void 0, true);\n  }\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.loader,\n      children: /*#__PURE__*/_jsxDEV(Spinner, {\n        color: \"#0077ff\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [createAlbumIntent && !activeAlbum && /*#__PURE__*/_jsxDEV(AlbumForm, {\n      loading: albumAddLoading,\n      onAdd: handleAdd\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this), !activeAlbum && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.top,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Your albums\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `${createAlbumIntent && styles.active}`,\n          onClick: () => setCreateAlbumIntent(!createAlbumIntent),\n          children: !createAlbumIntent ? \"Add album\" : \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.albumsList,\n        children: albums.map(album => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.album,\n          onClick: () => handleClick(album.name),\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/assets/photos.png\",\n            alt: \"images\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: album.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 17\n          }, this)]\n        }, album.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }, this), activeAlbum && /*#__PURE__*/_jsxDEV(ImagesList, {\n      albumId: albums.find(a => a.name === activeAlbum).id,\n      albumName: activeAlbum,\n      onBack: handleBack\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n_s(AlbumsList, \"/I3EI6/CINkmTF4adndB0cn/TxY=\");\n_c = AlbumsList;\nvar _c;\n$RefreshReg$(_c, \"AlbumsList\");","map":{"version":3,"names":["styles","useState","useEffect","toast","Spinner","collection","getDocs","addDoc","Timestamp","query","orderBy","db","AlbumForm","ImagesList","AlbumsList","albums","setAlbums","loading","setLoading","albumAddLoading","setAlbumAddLoading","getAlbums","albumsRef","albumsSnapshot","albumsData","docs","map","doc","id","data","handleAdd","name","find","a","error","albumRef","created","now","prev","success","createAlbumIntent","setCreateAlbumIntent","activeAlbum","setActiveAlbum","handleClick","handleBack","length","top","loader","active","albumsList","album"],"sources":["C:/Users/91870/Desktop/PhotoFolio-main/src/components/albumsList/AlbumsList.js"],"sourcesContent":["import styles from \"./albumsList.module.css\";\nimport { useState, useEffect } from \"react\";\nimport { toast } from \"react-toastify\";\nimport Spinner from \"react-spinner-material\";\n\n// firebase imports\nimport {\n  collection,\n  getDocs,\n  addDoc,\n  Timestamp,\n  query,\n  orderBy,\n} from \"firebase/firestore\";\nimport { db } from \"../../firebase\";\n\n// components imports\nimport { AlbumForm } from \"../albumForm/AlbumForm\";\nimport { ImagesList } from \"../imagesList/ImagesList\";\n\n// mock data\n// import { albumsData } from \"../../static/mock\";\n\nexport const AlbumsList = () => {\n  const [albums, setAlbums] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  const [albumAddLoading, setAlbumAddLoading] = useState(false);\n\n  const getAlbums = async () => {\n    setLoading(true);\n    const albumsRef = collection(db, \"albums\");\n    const albumsSnapshot = await getDocs(\n      query(albumsRef, orderBy(\"created\", \"desc\"))\n    );\n    const albumsData = albumsSnapshot.docs.map((doc) => ({\n      id: doc.id,\n      ...doc.data(),\n    }));\n    setAlbums(albumsData);\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    getAlbums();\n  }, []);\n\n  const handleAdd = async (name) => {\n    if (albums.find((a) => a.name === name))\n      return toast.error(\"Album name already in use.\");\n    setAlbumAddLoading(true);\n    const albumRef = await addDoc(collection(db, \"albums\"), {\n      name,\n      created: Timestamp.now(),\n    });\n    setAlbums((prev) => [{ id: albumRef.id, name }, ...prev]);\n    setAlbumAddLoading(false);\n    toast.success(\"Album added successfully.\");\n  };\n\n  const [createAlbumIntent, setCreateAlbumIntent] = useState(false);\n  const [activeAlbum, setActiveAlbum] = useState(null);\n\n  const handleClick = (name) => {\n    if (activeAlbum === name) return setActiveAlbum(null);\n    setActiveAlbum(name);\n  };\n\n  const handleBack = () => setActiveAlbum(null);\n\n  if (albums.length === 0 && !loading) {\n    return (\n      <>\n        <div className={styles.top}>\n          <h3>No albums found.</h3>\n          <button onClick={() => setCreateAlbumIntent(!createAlbumIntent)}>\n            {!createAlbumIntent ? \"Add album\" : \"Cancel\"}\n          </button>\n        </div>\n        {createAlbumIntent && <AlbumForm onAdd={handleAdd} />}\n      </>\n    );\n  }\n  if (loading) {\n    return (\n      <div className={styles.loader}>\n        <Spinner color=\"#0077ff\" />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {createAlbumIntent && !activeAlbum && (\n        <AlbumForm loading={albumAddLoading} onAdd={handleAdd} />\n      )}\n      {!activeAlbum && (\n        <div>\n          <div className={styles.top}>\n            <h3>Your albums</h3>\n            <button\n              className={`${createAlbumIntent && styles.active}`}\n              onClick={() => setCreateAlbumIntent(!createAlbumIntent)}\n            >\n              {!createAlbumIntent ? \"Add album\" : \"Cancel\"}\n            </button>\n          </div>\n          <div className={styles.albumsList}>\n            {albums.map((album) => (\n              <div\n                key={album.id}\n                className={styles.album}\n                onClick={() => handleClick(album.name)}\n              >\n                <img src=\"/assets/photos.png\" alt=\"images\" />\n                <span>{album.name}</span>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n      {activeAlbum && (\n        <ImagesList\n          albumId={albums.find((a) => a.name === activeAlbum).id}\n          albumName={activeAlbum}\n          onBack={handleBack}\n        />\n      )}\n    </>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}